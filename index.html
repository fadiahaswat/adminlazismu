<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Lazismu Mu'allimin</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Kalam:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="admin.css">

    <script>
        tailwind.config = {
            theme: { 
                extend: { 
                    fontFamily: { sans: ['Plus Jakarta Sans', 'sans-serif'] },
                    colors: {
                        primary: '#f97316', // Orange Lazismu
                        secondary: '#1e293b', // Slate 800
                    }
                } 
            }
        }
    </script>

    <style>
        /* Custom Scrollbar untuk kesan Admin Panel Modern */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Animasi Masuk */
        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .animate-enter { animation: fadeInScale 0.3s ease-out forwards; }

        /* Container PDF Hidden (JANGAN DIUBAH - PENTING UNTUK PRINT) */
        #hidden-receipt-container { position: fixed; left: -10000px; top: 0; z-index: -1; }
        .receipt-page { width: 210mm; height: 148mm; position: relative; background-image: url('MasterTemplate.png'); background-size: 100% 100%; background-color: white; font-family: 'Lato', sans-serif; font-size: 11pt; color: #000; }
        .receipt-editable { position: absolute; line-height: 1.0; white-space: nowrap; overflow: hidden; font-family: 'Kalam', cursive; font-weight: 700; font-size: 14pt; color: #000080; display: flex; align-items: flex-end; background: transparent; border: none; }
        
        /* Koordinat CSS Kuitansi (Tetap sesuai aslinya) */
        .pos-nomor { top: 19.3mm; left: 70.4mm; width: 38.1mm; }
        .tgl-d1 { top: 19.9mm; left: 164.5mm; width: 5.0mm; justify-content: center; }
        .tgl-d2 { top: 19.9mm; left: 169.8mm; width: 4.8mm; justify-content: center; }
        .tgl-m1 { top: 19.9mm; left: 176.4mm; width: 5.0mm; justify-content: center; }
        .tgl-m2 { top: 19.9mm; left: 181.7mm; width: 4.8mm; justify-content: center; }
        .tgl-y1 { top: 19.9mm; left: 188.8mm; width: 5.0mm; justify-content: center; }
        .tgl-y2 { top: 19.9mm; left: 193.6mm; width: 5.0mm; justify-content: center; }
        .nama { top: 34.7mm; left: 89.7mm; width: 110.6mm; height: 8mm; }
        .alamat { top: 40.5mm; left: 89.7mm; width: 110.6mm; height: 8mm; font-size: 12pt; }
        .telepon-fax { top: 46.6mm; left: 89.7mm; width: 54.0mm; }
        .no-hp { top: 46.6mm; left: 152.9mm; width: 47.1mm; }
        .jenis-zakat { top: 70.4mm; left: 68.0mm; width: 33.1mm; justify-content: flex-end; padding-right: 5px; }
        .nominal-zakat { top: 70.4mm; left: 111.9mm; width: 64.0mm; }
        .jenis-infaq { top: 76.5mm; left: 80.9mm; width: 20.1mm; justify-content: flex-end; padding-right: 5px; }
        .nominal-infaq { top: 76.3mm; left: 111.9mm; width: 66.1mm; }
        .jenis-lain { top: 82.1mm; left: 71.9mm; width: 29.1mm; justify-content: flex-end; padding-right: 5px; }
        .nominal-lain { top: 82.1mm; left: 111.9mm; width: 66.1mm; }
        .nominal-total { top: 89.2mm; left: 111.9mm; width: 66.1mm; }
        .chk { justify-content: center; font-family: 'Lato', sans-serif; font-weight: bold; font-size: 14pt; color: #000; }
        .centang-kas { top: 70.4mm; left: 179.1mm; width: 5.0mm; }
        .centang-bank { top: 76.3mm; left: 179.1mm; width: 5.0mm; }
        .nama-bank { top: 75.7mm; left: 193.6mm; width: 9.3mm; font-size: 10pt; }
        .centang-wesel { top: 82.3mm; left: 179.1mm; width: 5.0mm; }
        .terbilang-1 { top: 96.1mm; left: 89.7mm; width: 110.0mm; font-size: 12pt; }
        .terbilang-2 { top: 102.2mm; left: 89.7mm; width: 110.0mm; font-size: 12pt; }
        .box-img { position: absolute; display: flex; align-items: center; justify-content: center; z-index: 5; pointer-events: none; }
        .stempel { top: 106.2mm; left: 62.4mm; width: 39.9mm; height: 34.9mm; }
        .tempat-ttd { top: 106.2mm; left: 70.4mm; width: 61.4mm; height: 40.0mm; }
        .stempel img, .tempat-ttd img { width: 100%; height: 100%; object-fit: contain; mix-blend-mode: multiply; opacity: 0.9; }
        .penerima { top: 128.9mm; left: 89.7mm; width: 39.7mm; justify-content: center; font-size: 12pt; }
        .penyetor { top: 128.9mm; left: 149.7mm; width: 39.9mm; justify-content: center; font-size: 12pt; }
    </style>
</head>
<body class="text-slate-600 bg-gray-50/80 font-sans selection:bg-orange-100 selection:text-orange-600">

    <div id="login-overlay" class="fixed inset-0 z-[200] bg-slate-900/90 backdrop-blur-sm flex items-center justify-center p-4 transition-all duration-500">
        <div class="bg-white rounded-[2rem] p-8 md:p-10 max-w-sm w-full text-center shadow-2xl ring-1 ring-slate-900/5 animate-enter">
            <div class="w-20 h-20 bg-gradient-to-tr from-orange-100 to-orange-50 rounded-2xl flex items-center justify-center mx-auto mb-8 shadow-inner">
                <i class="fas fa-shield-alt text-3xl text-orange-600"></i>
            </div>
            <h2 class="text-2xl font-extrabold text-slate-800 mb-2 tracking-tight">Admin Portal</h2>
            <p class="text-slate-400 mb-8 text-sm font-medium">Masuk untuk mengelola data Lazismu</p>
            
            <div class="space-y-4">
                <div class="relative group">
                    <i class="fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-orange-500 transition-colors"></i>
                    <input type="email" id="admin-email" class="w-full pl-11 pr-4 py-3.5 rounded-xl bg-slate-50 border border-slate-200 focus:border-orange-500 focus:bg-white focus:ring-4 focus:ring-orange-500/10 outline-none transition-all font-semibold text-slate-700 placeholder:text-slate-400" placeholder="Email Administrator">
                </div>
                
                <div class="relative group">
                    <i class="fas fa-lock absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-orange-500 transition-colors"></i>
                    <input type="password" id="admin-password" class="w-full pl-11 pr-4 py-3.5 rounded-xl bg-slate-50 border border-slate-200 focus:border-orange-500 focus:bg-white focus:ring-4 focus:ring-orange-500/10 outline-none transition-all font-semibold text-slate-700 placeholder:text-slate-400" placeholder="Password">
                </div>
            </div>
            
            <p id="login-error" class="text-red-500 text-xs font-bold mt-4 bg-red-50 py-2 px-3 rounded-lg hidden flex items-center gap-2"><i class="fas fa-exclamation-circle"></i> <span></span></p>

            <button id="btn-login-firebase" class="w-full mt-8 bg-slate-900 hover:bg-orange-600 text-white font-bold py-4 rounded-xl transition-all shadow-xl shadow-slate-900/20 hover:shadow-orange-600/30 active:scale-[0.98] flex justify-center items-center gap-2 group">
                <span>Masuk Dashboard</span>
                <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
            </button>
        </div>
    </div>

    <div id="alert-modal" class="hidden fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 opacity-0 transition-opacity duration-300">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-sm p-8 text-center scale-95 transform transition-all duration-300">
            <div id="alert-icon-container" class="mb-5 [&>div]:mx-auto"></div>
            <h3 id="alert-modal-title" class="text-xl font-bold text-slate-800 mb-2"></h3>
            <p id="alert-modal-message" class="text-slate-500 mb-8 text-sm leading-relaxed"></p>
            <button id="alert-modal-close" class="w-full bg-slate-100 hover:bg-slate-200 text-slate-700 px-6 py-3.5 rounded-xl font-bold transition-colors">Tutup</button>
        </div>
    </div>

    <div id="confirm-modal" class="hidden fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[99] flex items-center justify-center p-4 opacity-0 transition-opacity duration-300">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-sm p-8 text-center scale-95 transform transition-all duration-300 border border-white/20">
            <div class="w-16 h-16 bg-yellow-50 text-yellow-500 rounded-2xl flex items-center justify-center text-2xl mx-auto mb-6 shadow-sm ring-4 ring-yellow-50"><i class="fas fa-exclamation-triangle"></i></div>
            <h3 class="text-lg font-bold text-slate-800 mb-2">Konfirmasi Tindakan</h3>
            <p id="confirm-modal-message" class="text-slate-500 mb-8 text-sm">Apakah Anda yakin ingin melanjutkan?</p>
            <div class="flex gap-3">
                <button id="confirm-modal-cancel" class="flex-1 bg-white border border-slate-200 text-slate-600 py-3 rounded-xl font-bold hover:bg-slate-50 transition-colors">Batal</button>
                <button id="confirm-modal-ok" class="flex-1 bg-red-600 text-white py-3 rounded-xl font-bold hover:bg-red-700 transition-colors shadow-lg shadow-red-600/20">Ya, Proses</button>
            </div>
        </div>
    </div>

    <div id="edit-modal" class="hidden fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[98] flex items-center justify-center p-4 opacity-0 transition-opacity duration-300">
        <div class="bg-white rounded-[2.5rem] shadow-2xl w-full max-w-4xl flex flex-col max-h-[90vh] scale-95 transform transition-all duration-300 overflow-hidden ring-1 ring-black/5">
            <form id="edit-form" class="flex flex-col h-full">
                <div class="flex justify-between items-center px-8 py-6 border-b border-slate-100 bg-white">
                    <div>
                        <h3 class="text-xl font-bold text-slate-800 flex items-center gap-2">
                            <span class="w-2 h-6 bg-orange-500 rounded-full inline-block"></span>
                            Edit Data Donasi
                        </h3>
                        <p class="text-xs text-slate-400 font-bold uppercase tracking-wider mt-1 pl-4">Update Database Transaksi</p>
                    </div>
                    <button id="edit-modal-close" type="button" class="w-10 h-10 rounded-full bg-slate-50 text-slate-400 hover:bg-red-50 hover:text-red-500 transition flex items-center justify-center group"><i class="fas fa-times text-lg group-hover:rotate-90 transition-transform"></i></button>
                </div>
                
                <div class="p-8 space-y-6 overflow-y-auto custom-scrollbar flex-1 bg-slate-50/50">
                    <input type="hidden" id="edit-row-number">
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm hover:shadow-md transition-shadow">
                            <h4 class="text-xs font-black text-slate-400 uppercase tracking-widest mb-6 flex items-center gap-2 border-b border-slate-50 pb-2">
                                <i class="fas fa-receipt text-orange-500"></i> Detail Transaksi
                            </h4>
                            <div class="space-y-5">
                                <div>
                                    <label class="block text-[11px] font-bold text-slate-500 mb-1.5 ml-1">Nominal (Rp)</label>
                                    <div class="relative">
                                        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-bold text-xs">Rp</span>
                                        <input type="number" id="edit-Nominal" class="w-full pl-9 pr-3 py-2.5 bg-slate-50 border-slate-200 rounded-xl text-sm font-bold focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all outline-none">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-[11px] font-bold text-slate-500 mb-1.5 ml-1">Jenis Donasi</label>
                                    <input type="text" id="edit-JenisDonasi" class="w-full px-3 py-2.5 bg-slate-50 border-slate-200 rounded-xl text-sm font-semibold focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all outline-none">
                                </div>
                                <div>
                                    <label class="block text-[11px] font-bold text-slate-500 mb-1.5 ml-1">Metode Bayar</label>
                                    <div class="relative">
                                        <select id="edit-MetodePembayaran" class="w-full px-3 py-2.5 bg-slate-50 border-slate-200 rounded-xl text-sm font-semibold focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all outline-none appearance-none cursor-pointer">
                                            <option value="Transfer">Transfer Bank</option>
                                            <option value="QRIS">QRIS / E-Wallet</option>
                                            <option value="Tunai">Tunai / Cash</option>
                                        </select>
                                        <i class="fas fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs pointer-events-none"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm hover:shadow-md transition-shadow">
                            <h4 class="text-xs font-black text-slate-400 uppercase tracking-widest mb-6 flex items-center gap-2 border-b border-slate-50 pb-2">
                                <i class="fas fa-user text-blue-500"></i> Info Donatur
                            </h4>
                            <div class="space-y-5">
                                <div>
                                    <label class="block text-[11px] font-bold text-slate-500 mb-1.5 ml-1">Nama Lengkap</label>
                                    <input type="text" id="edit-NamaDonatur" class="w-full px-3 py-2.5 bg-slate-50 border-slate-200 rounded-xl text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none">
                                </div>
                                <div>
                                    <label class="block text-[11px] font-bold text-slate-500 mb-1.5 ml-1">WhatsApp</label>
                                    <div class="relative">
                                        <i class="fab fa-whatsapp absolute left-3 top-1/2 -translate-y-1/2 text-green-500"></i>
                                        <input type="tel" id="edit-NoHP" class="w-full pl-9 pr-3 py-2.5 bg-slate-50 border-slate-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none">
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-[11px] font-bold text-slate-500 mb-1.5 ml-1">Email</label>
                                        <input type="email" id="edit-Email" placeholder="user@mail.com" class="w-full px-3 py-2 bg-slate-50 border-slate-200 rounded-xl text-xs font-medium focus:border-blue-500 outline-none transition">
                                    </div>
                                    <div>
                                        <label class="block text-[11px] font-bold text-slate-500 mb-1.5 ml-1">NIK/KTP</label>
                                        <input type="text" id="edit-NoKTP" placeholder="16 digit" class="w-full px-3 py-2 bg-slate-50 border-slate-200 rounded-xl text-xs font-medium focus:border-blue-500 outline-none transition">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-b from-orange-50 to-white p-6 rounded-3xl border border-orange-100 shadow-sm hover:shadow-md transition-shadow">
                            <h4 class="text-xs font-black text-orange-800/70 uppercase tracking-widest mb-6 flex items-center gap-2 border-b border-orange-100 pb-2">
                                <i class="fas fa-graduation-cap text-orange-600"></i> Afiliasi Santri
                            </h4>
                            <div class="space-y-5">
                                <div>
                                    <label class="block text-[11px] font-bold text-orange-900/60 mb-1.5 ml-1">Tipe Relasi</label>
                                    <div class="relative">
                                        <select id="edit-TipeDonatur" class="w-full px-3 py-2.5 bg-white border-orange-200 rounded-xl text-sm font-bold text-orange-900 focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all outline-none appearance-none cursor-pointer shadow-sm">
                                            <option value="santri">Wali Santri Aktif</option>
                                            <option value="alumni">Alumni</option>
                                            <option value="umum">Umum / Simpatisan</option>
                                        </select>
                                        <i class="fas fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-orange-400 text-xs pointer-events-none"></i>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-[11px] font-bold text-orange-900/60 mb-1.5 ml-1">Nama Santri</label>
                                        <input type="text" id="edit-NamaSantri" class="w-full px-3 py-2 bg-white border-orange-200 rounded-xl text-xs font-medium focus:border-orange-500 outline-none transition">
                                    </div>
                                    <div>
                                        <label class="block text-[11px] font-bold text-orange-900/60 mb-1.5 ml-1">Kelas/Angkatan</label>
                                        <input type="text" id="edit-KelasSantri" class="w-full px-3 py-2 bg-white border-orange-200 rounded-xl text-xs font-medium focus:border-orange-500 outline-none transition">
                                    </div>
                                </div>
                                <input type="hidden" id="edit-NISSantri">
                                <input type="hidden" id="edit-DetailAlumni">
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white p-4 rounded-2xl border border-slate-200 focus-within:ring-2 focus-within:ring-slate-200 transition-all">
                            <label class="block text-[11px] font-bold text-slate-400 uppercase mb-2 flex justify-between">
                                <span>Pesan & Doa</span> <i class="far fa-comment-dots"></i>
                            </label>
                            <textarea id="edit-PesanDoa" rows="3" class="w-full border-none p-0 text-sm text-slate-600 focus:ring-0 resize-none placeholder:text-slate-300" placeholder="Tidak ada pesan"></textarea>
                        </div>
                        <div class="bg-white p-4 rounded-2xl border border-slate-200 focus-within:ring-2 focus-within:ring-slate-200 transition-all">
                            <label class="block text-[11px] font-bold text-slate-400 uppercase mb-2 flex justify-between">
                                <span>Alamat Lengkap</span> <i class="fas fa-map-marker-alt"></i>
                            </label>
                            <textarea id="edit-Alamat" rows="3" class="w-full border-none p-0 text-sm text-slate-600 focus:ring-0 resize-none placeholder:text-slate-300" placeholder="Alamat donatur..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="px-8 py-5 border-t border-slate-100 bg-white flex justify-end gap-3 rounded-b-[2.5rem]">
                    <button id="edit-modal-cancel" type="button" class="bg-white border border-slate-200 text-slate-600 px-6 py-3 rounded-xl font-bold hover:bg-slate-50 hover:text-slate-800 transition-all">Batal</button>
                    <button id="edit-modal-save" type="submit" class="bg-slate-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-orange-600 transition-all shadow-lg hover:shadow-orange-500/30 flex items-center gap-2">
                        <span id="edit-save-text">Simpan Perubahan</span> 
                        <span id="edit-save-loading" class="hidden"><i class="fas fa-circle-notch fa-spin"></i></span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <header class="bg-white/90 backdrop-blur-md sticky top-0 z-40 border-b border-slate-200/80 transition-all">
        <div class="container mx-auto px-4 md:px-8 py-3 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="w-11 h-11 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center text-white text-lg shadow-lg shadow-orange-500/20 ring-2 ring-white">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div>
                    <h1 class="text-xl font-black text-slate-800 leading-tight tracking-tight">Lazismu <span class="text-orange-500">Admin</span></h1>
                    <div class="flex items-center gap-2">
                        <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                        <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Live Dashboard</p>
                    </div>
                </div>
            </div>
            
            <div class="flex items-center gap-2 md:gap-3">
                <button id="export-csv-button" class="hidden md:flex items-center gap-2 bg-white text-green-700 border border-green-200/60 px-4 py-2.5 rounded-xl font-bold text-xs hover:bg-green-50 hover:border-green-300 transition-all group shadow-sm">
                    <i class="fas fa-file-csv text-lg group-hover:scale-110 transition-transform"></i> 
                    <span>Export CSV</span>
                </button>
                
                <div class="h-8 w-px bg-slate-200 mx-1 hidden md:block"></div>

                <button id="refresh-button" class="flex items-center gap-2 bg-slate-100 text-slate-600 px-4 py-2.5 rounded-xl font-bold text-xs hover:bg-slate-200 transition-all group active:scale-95">
                    <i id="refresh-icon" class="fas fa-sync-alt group-hover:rotate-180 transition-transform duration-700"></i> 
                    <span class="hidden sm:inline">Refresh</span>
                </button>
                
                <button onclick="logout()" class="w-10 h-10 rounded-xl bg-red-50 text-red-500 border border-red-100 hover:bg-red-500 hover:text-white flex items-center justify-center transition-all shadow-sm active:scale-95" title="Keluar">
                    <i class="fas fa-power-off"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 md:px-8 py-8 space-y-8">
        
        <div id="admin-stats-container" class="animate-enter">
            <div class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-6 gap-4">
                <div class="bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 group">
                    <div class="flex justify-between items-start mb-3">
                        <div class="w-10 h-10 rounded-xl bg-orange-50 text-orange-500 flex items-center justify-center group-hover:scale-110 transition-transform"><i class="fas fa-wallet"></i></div>
                        <span class="text-[10px] font-extrabold bg-orange-100 text-orange-600 px-2.5 py-1 rounded-lg">TOTAL</span>
                    </div>
                    <h3 id="admin-stat-total" class="text-base sm:text-lg font-black text-slate-800 truncate mb-1">Rp 0</h3>
                    <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wide">Semua Pemasukan</p>
                </div>

                <div class="bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 group">
                    <div class="flex justify-between items-start mb-3">
                        <div class="w-10 h-10 rounded-xl bg-blue-50 text-blue-500 flex items-center justify-center group-hover:scale-110 transition-transform"><i class="fas fa-users"></i></div>
                        <span class="text-[10px] font-extrabold bg-blue-100 text-blue-600 px-2.5 py-1 rounded-lg">TRX</span>
                    </div>
                    <h3 id="admin-stat-donatur" class="text-base sm:text-lg font-black text-slate-800 truncate mb-1">0</h3>
                    <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wide">Jumlah Transaksi</p>
                </div>

                <div class="bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 group relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-green-400/10 to-transparent rounded-bl-full"></div>
                    <div class="flex justify-between items-start mb-3">
                        <div class="w-10 h-10 rounded-xl bg-green-50 text-green-500 flex items-center justify-center group-hover:scale-110 transition-transform"><i class="fas fa-calendar-day"></i></div>
                        <span class="text-[10px] font-extrabold bg-green-100 text-green-600 px-2.5 py-1 rounded-lg">TODAY</span>
                    </div>
                    <h3 id="admin-stat-hari-ini" class="text-base sm:text-lg font-black text-slate-800 truncate mb-1">Rp 0</h3>
                    <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wide">Masuk Hari Ini</p>
                </div>

                <div class="bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 group">
                    <div class="flex justify-between items-start mb-3">
                        <div class="w-10 h-10 rounded-xl bg-purple-50 text-purple-500 flex items-center justify-center group-hover:scale-110 transition-transform"><i class="fas fa-chart-pie"></i></div>
                        <span class="text-[10px] font-extrabold bg-purple-100 text-purple-600 px-2.5 py-1 rounded-lg">AVG</span>
                    </div>
                    <h3 id="admin-stat-rata" class="text-base sm:text-lg font-black text-slate-800 truncate mb-1">Rp 0</h3>
                    <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wide">Rata-rata Nilai</p>
                </div>

                <div class="bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 group">
                    <div class="flex justify-between items-start mb-3">
                        <div class="w-10 h-10 rounded-xl bg-yellow-50 text-yellow-500 flex items-center justify-center group-hover:scale-110 transition-transform"><i class="fas fa-trophy"></i></div>
                        <span class="text-[10px] font-extrabold bg-yellow-100 text-yellow-600 px-2.5 py-1 rounded-lg">MAX</span>
                    </div>
                    <h3 id="admin-stat-tertinggi" class="text-base sm:text-lg font-black text-slate-800 truncate mb-1">Rp 0</h3>
                    <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wide">Donasi Tertinggi</p>
                </div>

                <div class="bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 group">
                    <div class="flex justify-between items-start mb-3">
                        <div class="w-10 h-10 rounded-xl bg-teal-50 text-teal-500 flex items-center justify-center group-hover:scale-110 transition-transform"><i class="fas fa-star"></i></div>
                        <span class="text-[10px] font-extrabold bg-teal-100 text-teal-600 px-2.5 py-1 rounded-lg">TOP</span>
                    </div>
                    <h3 id="admin-stat-tipe" class="text-base sm:text-lg font-black text-slate-800 truncate mb-1 text-xs">-</h3>
                    <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wide">Program Populer</p>
                </div>
            </div>
        </div>

        <div id="admin-content" class="bg-white rounded-[2rem] shadow-xl shadow-slate-200/40 border border-slate-200/60 overflow-hidden animate-enter" style="animation-delay: 0.1s">
            
            <div class="p-6 md:p-8 border-b border-slate-100 bg-white">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5">
                    
                    <div class="lg:col-span-1">
                        <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2 tracking-wider">Pencarian Cepat</label>
                        <div class="relative group">
                            <i class="fas fa-search absolute left-4 top-3.5 text-slate-400 group-focus-within:text-orange-500 transition-colors"></i>
                            <input type="text" id="filter-search" placeholder="Cari nama, NIS, atau HP..." class="w-full pl-10 pr-4 py-3 rounded-xl bg-slate-50 border-slate-200 text-sm font-bold focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 focus:bg-white shadow-sm outline-none transition-all">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2 tracking-wider">Status Verifikasi</label>
                        <div class="relative">
                            <select id="filter-status" class="w-full pl-4 pr-10 py-3 rounded-xl bg-slate-50 border-slate-200 text-sm font-bold text-slate-600 focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 focus:bg-white shadow-sm cursor-pointer outline-none appearance-none transition-all">
                                <option value="">Semua Status</option>
                                <option value="Belum Verifikasi">⏳ Pending Verification</option>
                                <option value="Terverifikasi">✅ Verified (Diterima)</option>
                            </select>
                            <i class="fas fa-chevron-down absolute right-4 top-3.5 text-slate-400 pointer-events-none text-xs"></i>
                        </div>
                    </div>

                    <div>
                        <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2 tracking-wider">Program Donasi</label>
                        <div class="relative">
                            <select id="filter-jenis" class="w-full pl-4 pr-10 py-3 rounded-xl bg-slate-50 border-slate-200 text-sm font-bold text-slate-600 focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 focus:bg-white shadow-sm cursor-pointer outline-none appearance-none transition-all">
                                <option value="">Semua Program</option>
                            </select>
                            <i class="fas fa-chevron-down absolute right-4 top-3.5 text-slate-400 pointer-events-none text-xs"></i>
                        </div>
                    </div>
                    
                    <div class="flex items-end gap-2">
                        <button id="filter-apply-button" class="flex-1 bg-slate-800 text-white h-[46px] rounded-xl text-sm font-bold hover:bg-slate-900 transition-all shadow-lg hover:shadow-slate-900/20 active:translate-y-0.5">
                            <i class="fas fa-filter mr-2"></i> Terapkan
                        </button>
                        <button id="filter-reset-button" class="w-[46px] h-[46px] flex items-center justify-center bg-white border border-slate-200 text-slate-500 rounded-xl hover:text-red-500 hover:border-red-200 hover:bg-red-50 transition-all active:rotate-180 duration-500 shadow-sm" title="Reset Filter">
                            <i class="fas fa-undo"></i>
                        </button>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-5 mt-5 pt-5 border-t border-slate-100 border-dashed">
                    <div>
                        <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2 tracking-wider">Metode Bayar</label>
                        <div class="relative">
                            <select id="filter-metode" class="w-full pl-4 pr-10 py-2.5 rounded-xl bg-slate-50 border-slate-200 text-xs font-bold text-slate-600 outline-none focus:bg-white focus:border-blue-500 appearance-none">
                                <option value="">Semua Metode</option>
                            </select>
                            <i class="fas fa-chevron-down absolute right-4 top-3 text-slate-400 pointer-events-none text-xs"></i>
                        </div>
                    </div>
                    <div>
                        <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2 tracking-wider">Dari Tanggal</label>
                        <input type="date" id="filter-date-from" class="w-full px-4 py-2.5 rounded-xl bg-slate-50 border-slate-200 text-xs font-bold text-slate-600 outline-none focus:bg-white focus:border-blue-500 transition-colors uppercase">
                    </div>
                    <div>
                        <label class="block text-[10px] font-bold text-slate-400 uppercase mb-2 tracking-wider">Sampai Tanggal</label>
                        <input type="date" id="filter-date-to" class="w-full px-4 py-2.5 rounded-xl bg-slate-50 border-slate-200 text-xs font-bold text-slate-600 outline-none focus:bg-white focus:border-blue-500 transition-colors uppercase">
                    </div>
                </div>
            </div>

            <div id="admin-table-wrapper" class="hidden overflow-x-auto custom-scrollbar bg-white">
                <table class="w-full min-w-[1000px] text-left border-collapse">
                    <thead class="bg-slate-50 text-slate-500 text-[10px] uppercase font-bold tracking-wider sticky top-0 z-10 border-b border-slate-200">
                        <tr>
                            <th class="px-6 py-5 rounded-tl-lg">Waktu</th>
                            <th class="px-6 py-5">Donatur</th>
                            <th class="px-6 py-5">Kategori</th>
                            <th class="px-6 py-5 text-right">Nominal</th>
                            <th class="px-6 py-5 text-center">Metode</th>
                            <th class="px-6 py-5 text-center">Status</th> 
                            <th class="px-6 py-5 text-right rounded-tr-lg">Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="table-body" class="divide-y divide-slate-100 text-sm text-slate-600 font-medium">
                        </tbody>
                </table>
            </div>

            <div id="admin-loading" class="p-24 flex flex-col items-center justify-center text-slate-400">
                <div class="relative w-16 h-16 mb-6">
                    <div class="absolute w-full h-full border-4 border-slate-100 rounded-full"></div>
                    <div class="absolute w-full h-full border-4 border-t-orange-500 border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"></div>
                </div>
                <p class="font-bold text-sm tracking-wide animate-pulse">Menyinkronkan Database...</p>
            </div>
            
            <div id="admin-error" class="hidden p-20 text-center text-red-500 bg-red-50/30 m-4 rounded-2xl border border-red-100">
                <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-wifi text-2xl"></i>
                </div>
                <h3 class="font-bold text-lg text-slate-800">Koneksi Gagal</h3>
                <p id="admin-error-message" class="text-sm opacity-80 mt-1 max-w-xs mx-auto">Tidak dapat terhubung ke server.</p>
            </div>
            
            <div id="admin-no-data" class="hidden p-24 text-center text-slate-400">
                <div class="w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4 border border-slate-100">
                    <i class="far fa-folder-open text-3xl opacity-40"></i>
                </div>
                <p class="font-bold text-slate-600">Tidak ada data ditemukan</p>
                <p class="text-xs mt-1 text-slate-400">Coba ubah filter pencarian Anda.</p>
            </div>

            <div class="p-5 border-t border-slate-100 bg-slate-50 flex flex-col md:flex-row justify-between items-center gap-4 text-xs font-bold text-slate-500">
                <div class="flex items-center gap-3 bg-white px-3 py-1.5 rounded-lg border border-slate-200 shadow-sm">
                    <span class="text-slate-400">Baris per halaman:</span>
                    <select id="pagination-rows" class="bg-transparent border-none p-0 pr-4 focus:ring-0 cursor-pointer outline-none text-slate-700 font-bold">
                        <option value="25">25</option>
                        <option value="50" selected>50</option>
                        <option value="100">100</option>
                    </select>
                </div>
                
                <span id="pagination-info" class="bg-white px-4 py-2 rounded-full border border-slate-200 shadow-sm">Memuat data...</span>
                
                <div class="flex gap-2">
                    <button id="pagination-prev" class="w-9 h-9 rounded-xl bg-white border border-slate-200 flex items-center justify-center text-slate-500 hover:bg-orange-50 hover:text-orange-600 hover:border-orange-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-sm">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button id="pagination-next" class="w-9 h-9 rounded-xl bg-white border border-slate-200 flex items-center justify-center text-slate-500 hover:bg-orange-50 hover:text-orange-600 hover:border-orange-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-sm">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <div id="hidden-receipt-container">
        <div id="receipt-content" class="receipt-page">
            <div id="rcpt-no" class="receipt-editable pos-nomor"></div>
            <div id="rcpt-d1" class="receipt-editable tgl-d1"></div>
            <div id="rcpt-d2" class="receipt-editable tgl-d2"></div>
            <div id="rcpt-m1" class="receipt-editable tgl-m1"></div>
            <div id="rcpt-m2" class="receipt-editable tgl-m2"></div>
            <div id="rcpt-y1" class="receipt-editable tgl-y1"></div>
            <div id="rcpt-y2" class="receipt-editable tgl-y2"></div>
            <div id="rcpt-nama" class="receipt-editable nama"></div>
            <div id="rcpt-alamat" class="receipt-editable alamat"></div>
            <div id="rcpt-telp" class="receipt-editable telepon-fax"></div>
            <div id="rcpt-hp" class="receipt-editable no-hp"></div>
            <div id="rcpt-jenis-zakat" class="receipt-editable jenis-zakat"></div>
            <div id="rcpt-nom-zakat" class="receipt-editable nominal-zakat"></div>
            <div id="rcpt-jenis-infaq" class="receipt-editable jenis-infaq"></div>
            <div id="rcpt-nom-infaq" class="receipt-editable nominal-infaq"></div>
            <div id="rcpt-jenis-lain" class="receipt-editable jenis-lain"></div>
            <div id="rcpt-nom-lain" class="receipt-editable nominal-lain"></div>
            <div id="rcpt-total" class="receipt-editable nominal-total"></div>
            <div id="rcpt-chk-kas" class="receipt-editable chk centang-kas"></div>
            <div id="rcpt-chk-bank" class="receipt-editable chk centang-bank"></div>
            <div id="rcpt-nama-bank" class="receipt-editable nama-bank"></div>
            <div id="rcpt-chk-wesel" class="receipt-editable chk centang-wesel"></div>
            <div id="rcpt-terbilang-1" class="receipt-editable terbilang-1"></div>
            <div id="rcpt-terbilang-2" class="receipt-editable terbilang-2"></div>
            <div class="box-img stempel"><img src="stempel.png" alt="Stempel"></div>
            <div class="box-img tempat-ttd"><img src="ttd.png" alt="TTD"></div>
            <div class="receipt-editable penerima">Andi Aqillah</div>
            <div id="rcpt-penyetor" class="receipt-editable penyetor"></div>
        </div>
    </div>

    <script type="module" src="admin.js"></script>
</body>
</html>
